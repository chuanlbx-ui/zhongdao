services:
  api:
    image: ghcr.io/chuanlbx-ui/zhongdao-api:${IMAGE_TAG:-latest}
    container_name: zhongdao-api-staging
    restart: unless-stopped
    env_file:
      - ${API_ENV_FILE:-../../config/env/.env.staging.example}
    ports:
      - "${API_PORT:-3001}:3000"
    healthcheck:
      test: ["CMD", "wget", "--spider", "-q", "http://127.0.0.1:3000/health"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 20s
    volumes:
      - ../../logs/api-staging:/app/logs
